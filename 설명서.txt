# FruitBox LLM μ „λµ ν…μ¤νΈ μ„¤λ…μ„

## κ°μ”
μ΄ ν”„λ΅μ νΈλ” 5κ° μΉ΄ν…κ³ λ¦¬(A~E)μ λ‹¤μ–‘ν• LLM μ „λµμ„ ν…μ¤νΈν•©λ‹λ‹¤.

## μ „λµ μΉ΄ν…κ³ λ¦¬ μ„¤λ…

### A μ‹λ¦¬μ¦ (Basic strategies)
- A1: κΈ°λ³Έ λ² μ΄μ¤λΌμΈ
- A2: κ·μΉ™ μ¶”κ°€
- A3: μμ‹ μ¶”κ°€
- A4: μµμ  μ°ΎκΈ°
- A5: κ°€μ¥ λ‹¨μν• ν•νƒ

### B μ‹λ¦¬μ¦ (Reasoning strategies)
- B1: Chain of Thought (μ „μ²΄ μ¶”λ΅ )
- B2: Per-Step Reasoning (λ‹¨κ³„λ³„ μ¶”λ΅ )
- B3: CoT Per-Step 85 moves (85μ λ‹¨κ³„λ³„ μ¶”λ΅ )

### C μ‹λ¦¬μ¦ (Multi-turn incremental strategies)
- C1: λ‹¤μ¤‘ν„΄ + μ¶”λ΅  (μ μ§„μ  κ°λ³„ μ μƒμ„±)
- C3: λ‹¤μ¤‘ν„΄ λ‹¨μ
- C4: μ μ§„μ  Generator + Judge κ°λ³„ μ

### D μ‹λ¦¬μ¦ (Multi-turn judge strategies)
- D1: Generator + Judge μ „μ²΄ ν‰κ°€

### E μ‹λ¦¬μ¦ (List-based strategies)
- E1: λ¦¬μ¤νΈμ—μ„ μ°ΎκΈ°
- E2: λ¦¬μ¤νΈμ—μ„ μ°ΎκΈ° + μ¶”λ΅ 

## ν…μ¤νΈ μ‹¤ν–‰ λ°©λ²•

### 1. κΈ°λ³Έ μ„¤μ • (simulate_llm_moves.py)

#### μ¤‘μ” μ„¤μ • λ³€μλ“¤:
```python
# ν…μ¤νΈν•  ν”„λ΅¬ν”„νΈ ν΄λ” μ„ νƒ
PROMPTS_FOLDER = "prompts/A"    # A, B, C, D, E μ¤‘ μ„ νƒ

# ν…μ¤νΈν•  λ¨λΈ μ„ νƒ
MODELS_TO_TEST = ["gemini"]     # ["gpt", "claude", "gemini"] μ¤‘ μ„ νƒ

# ν…μ¤νΈν•  λ³΄λ“ μ μ ν•
MAX_BOARD_ID_TO_TEST = 1        # λΉ λ¥Έ ν…μ¤νΈμ©

# λ©€ν‹°ν„΄ λ¨λ“ μ„¤μ • (C, D μ‹λ¦¬μ¦μ©)
USE_MULTI_TURN = True           # C, D μ‹λ¦¬μ¦λ” True ν•„μ”
USE_MULTI_TURN = False          # A, B, E μ‹λ¦¬μ¦λ” False κ¶μ¥

# μ‹¤ν–‰ λ¨λ“ (C, D μ‹λ¦¬μ¦μ©)
EXECUTION_MODE = "test"         # 1ν„΄ ν…μ¤νΈ
EXECUTION_MODE = "real"         # 85ν„΄ μ‹¤μ  μ‹¤ν–‰
```

### 2. κ° μ‹λ¦¬μ¦λ³„ ν…μ¤νΈ μ„¤μ •

#### A μ‹λ¦¬μ¦ ν…μ¤νΈ:
```python
PROMPTS_FOLDER = "prompts/A"
USE_MULTI_TURN = False
MODELS_TO_TEST = ["gemini"]  # λλ” μ›ν•λ” λ¨λΈ
```

#### B μ‹λ¦¬μ¦ ν…μ¤νΈ:
```python
PROMPTS_FOLDER = "prompts/B"
USE_MULTI_TURN = False
MODELS_TO_TEST = ["gemini"]
```

#### C μ‹λ¦¬μ¦ ν…μ¤νΈ (μ μ§„μ  λ©€ν‹°ν„΄):
```python
PROMPTS_FOLDER = "prompts/C"
USE_MULTI_TURN = True
EXECUTION_MODE = "test"     # 1ν„΄ ν…μ¤νΈμ©
# EXECUTION_MODE = "real"   # 85ν„΄ μ‹¤μ  μ‹¤ν–‰μ©
MODELS_TO_TEST = ["gemini"]
```

#### D μ‹λ¦¬μ¦ ν…μ¤νΈ (Judge λ©€ν‹°ν„΄):
```python
PROMPTS_FOLDER = "prompts/D"
USE_MULTI_TURN = True
EXECUTION_MODE = "test"
MODELS_TO_TEST = ["gemini"]
```

#### E μ‹λ¦¬μ¦ ν…μ¤νΈ:
```python
PROMPTS_FOLDER = "prompts/E"
USE_MULTI_TURN = False
MODELS_TO_TEST = ["gemini"]
```

### 3. μ‹¤ν–‰ λ…λ Ήμ–΄

```bash
# κΈ°λ³Έ μ‹¤ν–‰
python simulate_llm_moves.py

# νΉμ • μ „λµλ§ ν…μ¤νΈ (ν”„λ΅¬ν”„νΈ νμΌ μ΄λ¦„ κΈ°λ° ν•„ν„°λ§)
# generator.txt νμΌμ€ μλ™μΌλ΅ κ±΄λ„λλ‹λ‹¤
```

### 4. κ²°κ³Ό ν™•μΈ

μ‹¤ν–‰ ν›„ `simulation_logs/test_YYYYMMDD_HHMMSS/` ν΄λ”μ—μ„ κ²°κ³Ό ν™•μΈ:
- `success/`: μ„±κ³µν• ν…μ¤νΈ κ²°κ³Ό
- `error/`: μ‹¤ν¨ν• ν…μ¤νΈ κ²°κ³Ό

κ° κ²°κ³Ό νμΌμ€ JSON ν•νƒλ΅ μ €μ¥λλ©° λ‹¤μ μ •λ³΄λ¥Ό ν¬ν•¨:
- λ³΄λ“ μƒνƒ
- LLM μ‘λ‹µ
- μ‹λ®¬λ μ΄μ… κ²°κ³Ό
- Greedy μ•κ³ λ¦¬μ¦κ³Όμ λΉ„κµ

### 5. λΉ λ¥Έ ν…μ¤νΈ μ²΄ν¬λ¦¬μ¤νΈ

#### μ „μ²΄ μ‹λ¦¬μ¦ μμ°¨ ν…μ¤νΈ:
1. A μ‹λ¦¬μ¦: `PROMPTS_FOLDER = "prompts/A"`, `USE_MULTI_TURN = False`
2. B μ‹λ¦¬μ¦: `PROMPTS_FOLDER = "prompts/B"`, `USE_MULTI_TURN = False`  
3. C μ‹λ¦¬μ¦: `PROMPTS_FOLDER = "prompts/C"`, `USE_MULTI_TURN = True`, `EXECUTION_MODE = "test"`
4. D μ‹λ¦¬μ¦: `PROMPTS_FOLDER = "prompts/D"`, `USE_MULTI_TURN = True`, `EXECUTION_MODE = "test"`
5. E μ‹λ¦¬μ¦: `PROMPTS_FOLDER = "prompts/E"`, `USE_MULTI_TURN = False`

#### 85ν„΄ μ‹¤μ  μ‹¤ν–‰ (C, D μ‹λ¦¬μ¦):
- `EXECUTION_MODE = "real"`λ΅ λ³€κ²½ ν›„ μ‹¤ν–‰

### 6. λ¬Έμ  ν•΄κ²°

#### λ¨λ“ μ¤λ¥ λ°μƒμ‹:
```bash
pip install openai anthropic google-generativeai pydantic python-dotenv
```

#### API ν‚¤ μ„¤μ •:
`.env` νμΌμ— λ‹¤μ μ„¤μ •:
```
OPENAI_API_KEY=your_openai_key
ANTHROPIC_API_KEY=your_anthropic_key  
GOOGLE_API_KEY=your_google_key
```

#### μ „λµ κ°μ§€ ν…μ¤νΈ:
```python
from prompt_strategy import PromptStrategyDetector
strategy = PromptStrategyDetector.detect_strategy('prompts/B/B3_CoT_PerStep_85.txt')
print(strategy.strategy_name if strategy else "μ „λµ κ°μ§€ μ‹¤ν¨")
```

### 7. μ‹¤ν–‰ κ²°κ³Ό μμ‹

μ„±κ³µμ μΈ μ‹¤ν–‰μ‹ λ‹¤μκ³Ό κ°™μ€ μ¶λ ¥μ„ ν™•μΈν•  μ μμµλ‹λ‹¤:
```
--- [Board ID: 0 | Prompt: B3_CoT_PerStep_85.txt] ---
π¤– Greedy μ•κ³ λ¦¬μ¦ μ‹¤ν–‰ μ¤‘...
   - Greedy κ²°κ³Ό: Score = 50, Moves = 5κ°

π€ μ‹¤ν— μ‹μ‘: [Model: GEMINI] [Mode: Single-Turn]
   - (μ „λµ: B-3_CoT_PerStep_85)
 β… μ„±κ³µ!
```

### 8. κ³ κΈ‰ μ„¤μ •

#### νΉμ • λ¨λΈλ§ ν…μ¤νΈ:
- GPTλ§: `MODELS_TO_TEST = ["gpt"]`
- Claudeλ§: `MODELS_TO_TEST = ["claude"]`  
- Geminiλ§: `MODELS_TO_TEST = ["gemini"]`
- μ „μ²΄: `MODELS_TO_TEST = ["gpt", "claude", "gemini"]`

#### λ” λ§μ€ λ³΄λ“ ν…μ¤νΈ:
`MAX_BOARD_ID_TO_TEST = 10`  # 10κ° λ³΄λ“κΉμ§€ ν…μ¤νΈ

#### μ—°μ† μ‹¤ν¨ ν—μ©:
`MAX_CONSECUTIVE_FAILS = 3`  # 3ν μ—°μ† μ‹¤ν¨κΉμ§€ ν—μ©